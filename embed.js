!function(){var e={};e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),function(){var t="undefined"!==typeof window?window:"undefined"!==typeof e.g?e.g:"undefined"!==typeof self?self:{};t.SENTRY_RELEASE={id:"production_v1.7.162_1_bc80886"},t.SENTRY_RELEASES=t.SENTRY_RELEASES||{},t.SENTRY_RELEASES["solve-ui@forethoughtai"]={id:"production_v1.7.162_1_bc80886"}}(),function(){"use strict";const e=window.document.currentScript;if(!e)throw new Error("FT: Could not find embed script");const t=e.getAttribute("position"),i=e.getAttribute("position-x"),n=e.getAttribute("position-y"),o=e.getAttribute("offset-x")||"",a=e.getAttribute("offset-y")||"",d=/^[-]?\d+(px|rem)$/,s=d.test(o)?`calc(${o} - 28px)`:"0",r=d.test(a)?`calc(${a} - 28px)`:"0",l=d.test(o)?o:"-28px",w=d.test(a)?a:"-28px",c="left"===t||"left"===i?"left":"right",u="top"===n?"top":"bottom",g="\n    border:none;\n    overflow:hidden;\n    position:fixed;\n    z-index:999999;\n    -webkit-mask-image: -webkit-radial-gradient(white, black);\n",m=e=>{let{cssHeight:t,height:i,width:n}=e;return`\n\n    width:${n}px;\n    ${c}: ${s};\n    height: ${t||`${i}px`};\n    ${u}: ${r}\n  `},h=`max-width: 485px; width:100%; ${c}: ${l}; height: 856px; ${u}: ${w}; border-radius: 12px`;var p,b;let f=null!==(p=window.location.ancestorOrigins)&&void 0!==p&&p[0]||document.referrer?new URL((null===(b=window.location.ancestorOrigins)||void 0===b?void 0:b[0])||document.referrer).origin:"*";const v=e=>{var t,i,n,o,a,d,s,r,l,w,c,u,g;null===(t=window.parent)||void 0===t||null===(i=t.postMessage)||void 0===i||i.call(t,e,f),null===(n=window)||void 0===n||null===(o=n.webkit)||void 0===o||null===(a=o.messageHandlers)||void 0===a||null===(d=a.widgetObservable)||void 0===d||null===(s=d.postMessage)||void 0===s||s.call(d,JSON.stringify(e)),null===(r=window)||void 0===r||null===(l=r.JSBridge)||void 0===l||null===(w=l.postMessage)||void 0===w||w.call(l,JSON.stringify(e)),null===(c=window)||void 0===c||null===(u=c.ReactNativeWebView)||void 0===u||null===(g=u.postMessage)||void 0===g||g.call(u,JSON.stringify(e))},y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=e();return i||(t>4?null:(await(n=2**t*600,new Promise((e=>setTimeout(e,n)))),y(e,t+1)));var n},E=window.matchMedia("(max-width: 480px)"),S=window.matchMedia("(max-height: 890px)"),k=window.matchMedia("(max-height: 700px)"),C=window.document,A=C.currentScript,_=null===A||void 0===A?void 0:A.getAttribute("hide-ft-after-zd");let z="",x=!1;const W=()=>{const e=C.getElementById("forethought-chat"),t=null===A||void 0===A?void 0:A.getAttribute("src"),i=t?new URL(t).origin:"*",n=t=>{var n;e&&(null===(n=e.contentWindow)||void 0===n||n.postMessage(t,i))},o=C.createElement("style");o.id="ft-salesforce-style";const a=()=>{o.innerHTML="",C.body.appendChild(o)},d=()=>{o.innerHTML=".embeddedServiceHelpButton { display: none !important;}",C.body.appendChild(o)},s=()=>{const e=C.getElementsByClassName("chasitorText")[0];e.value=z,function(e,t,i){if("createEvent"in C){const n=C.createEvent("HTMLEvents");n.keyCode=i,n.initEvent(t,!1,!0),e.dispatchEvent(n)}}(e,"keydown",13)},r=()=>{d(),window.Forethought("widget","show")};window.embedded_svc&&(window.embedded_svc.addEventHandler("afterDestroy",r),x=!0);const l=C.createElement("style");l.id="ft-zd-style";const w=()=>{try{window.zE&&window.zE("webWidget","hide")}catch{}l.innerHTML='\n      iframe[title="Button to launch messaging window"] { display: none !important;}\n      iframe[title="Message from company"] { display: none !important;}\n      iframe[data-product="web_widget"] { display: none !important ;}\n      ',C.body.appendChild(l)},c=()=>{try{window.zE&&window.zE("webWidget","show")}catch{}l.innerHTML='\n      iframe[title="Button to launch messaging window"] { display: block !important;}\n      iframe[title="Message from company"] { display: block !important;}\n      iframe[data-product="web_widget"] { display: block !important;}\n    ',C.body.appendChild(l)},u=e=>{if(!e)return;let t=!1;try{t=e("webWidget:get","chat:isChatting")}catch{}return"boolean"===typeof t&&(((e,t)=>{try{t?(c(),e("webWidget","open"),window.Forethought("widget","hide")):w(),e("webWidget:on","chat:end",(function(){e&&(e("webWidget","close"),w(),"true"!==_&&window.Forethought("widget","show"),window.Forethought("widget","close"))}))}catch{return}})(e,t),!0)},g=C.createElement("style");g.id="ft-kustomer-style";const m=C.createElement("style");m.id="ft-intercom-style";const h=e=>{let{autoSendConfig:t,email:i,identityVerificationEnabled:n,name:o,question:a,userid:d}=e;const s={...window.intercomSettings,hide_default_launcher:!1};n||(o&&(s.name=o),d&&(s.user_id=d),i&&(s.email=i)),window.Intercom("update",s),C.body.appendChild(m),a?(window.Intercom("showNewMessage",a),t&&t.should_auto_send_message&&setTimeout((()=>{const e=C.querySelector('iframe[name="intercom-messenger-frame"]');if(e){var t;const i=null===(t=e.contentWindow)||void 0===t?void 0:t.document.querySelector(".intercom-composer-send-button");i&&i.click()}}),t.auto_send_timeout)):window.Intercom("show")},p=C.createElement("style");p.id="ft-snapengage-style";const b=()=>{window.SnapEngage&&window.SnapEngage.hideButton(),p.innerHTML="#designstudio-button { display: none !important;}",C.body.appendChild(p)},f=e=>{var t;let{additionalParameters:i,email:n,name:o,question:a}=e;n&&window.SnapEngage.setUserEmail(n,!0),o&&window.SnapEngage.setUserName(o),window.SnapEngage&&window.SnapEngage.showButton(),p.innerHTML="#designstudio-button { display: block !important;}",C.body.appendChild(p),window.SnapEngage.startLink();const d=null===(t=C.getElementById("designstudio-iframe").contentWindow)||void 0===t?void 0:t.document.getElementById("message-textarea");d&&a&&(d.value=a),null!==i&&void 0!==i&&i.transcript&&window.SnapEngage&&window.SnapEngage.setCallback("ChatMessageReceived",(function(e){const t=()=>{let e=!0;try{e&&(e=!1,window.SnapEngage.sendTextToChat(null===i||void 0===i?void 0:i.transcript))}catch(n){e=!0,window.SnapEngage.setCallback("ChatMessageReceived",""),setTimeout(t,5e3)}},n=null===i||void 0===i?void 0:i.bot_alias_list;n&&e&&!n.includes(e)&&(t(),window.SnapEngage.setCallback("ChatMessageReceived",""))})),window.SnapEngage&&window.SnapEngage.setCallback("Close",(function(){b(),window.Forethought("widget","show")}))},E=e=>{let{email:t,name:i,question:n}=e;window.drift.on("ready",(function(){const e={};t&&(e.email=t),i&&(e.nickname=i),window.drift.api.setUserAttributes(e)})),n&&window.drift.api.goToNewConversation(n),window.drift&&window.drift.api.openChat()},S=(e,t)=>{(e=>{switch(e){case"hide":return void window.Forethought("widget","hide");case"minimize":return void window.Forethought("widget","close");default:;}})(e),v({...t,event:"forethoughtWidgetGenericHandoff"})},k=C.createElement("style");k.id="ft-brand-embassy-style";const W=e=>{let{autoStartSession:t,customFields:i,name:n,question:o}=e;if(n&&window.brandembassy("setCustomerName",n),i)for(const[a,d]of Object.entries(i))window.brandembassy("setCustomField",a,d);window.brandembassy("hideFirstSentMessage",!1),window.brandembassy("sendFirstMessageAutomatically",o),k.innerHTML="#be-frame {display: block !important;}",C.body.appendChild(k),window.brandembassy("openChatWindow"),t&&window.brandembassy("autoStartSession")},M=C.createElement("style");M.id="ft-gorgias-style";const T=e=>{let{question:t}=e;M.innerHTML="#gorgias-chat-container {display: block !important;}",C.body.appendChild(M),window.GorgiasChat.hideChat(!1),window.GorgiasChat.open(),window.GorgiasChat.sendMessage(t)},L=e=>{var t;let{additionalParameters:i,department:o,email:d,featureFlags:s,integration:l,name:u,question:m,widgetOption:p}=e;z=m;const b=function(e){n({event:"handoffStatus",hideWidget:!(arguments.length>1&&void 0!==arguments[1])||arguments[1],success:e})},v=null===s||void 0===s?void 0:s.includes("next_avail_dept_routing");switch(l){case"zendesk_messaging":const e=C.querySelector('iframe[title="Button to launch messaging window"]');if(!window.zE||!e)return b(!1);window.Forethought("widget","hide"),c(),window.zE&&(window.zE("messenger:set","zIndex",9999999),window.zE("messenger","open")),(()=>{try{const e=C.querySelector('iframe[title="Button to launch messaging window"]'),t=null===e||void 0===e?void 0:e.contentWindow,i=null===t||void 0===t?void 0:t.document.querySelector('button[data-garden-id="buttons.icon_button"]');null===i||void 0===i||i.addEventListener("click",(()=>{w(),window.zE&&window.zE("messenger:set","zIndex",-1),window.Forethought("widget","show")}))}catch(e){console.error(e)}})(),m&&(e=>{let t=!0,i=0;const n=()=>{if(t&&i<=10){var o;t=!1;const r=C.querySelector('iframe[title="Messaging window"]'),l=null===r||void 0===r||null===(o=r.contentWindow)||void 0===o?void 0:o.document.querySelector('textarea[data-garden-id="forms.textarea"]');if(l){var a,d,s;null===(a=Object.getOwnPropertyDescriptor(window.HTMLTextAreaElement.prototype,"value"))||void 0===a||null===(d=a.set)||void 0===d||d.call(l,e),l.dispatchEvent(new Event("change",{bubbles:!0}));const t=null===r||void 0===r||null===(s=r.contentWindow)||void 0===s?void 0:s.document.querySelector('button[data-garden-id="buttons.icon_button"][aria-label="Send message"]');t&&t.click()}else t=!0,i++,setTimeout(n,3e3)}};n()})(m),b(!0),F(l,{integration:l,question:m});break;case"zendesk":const{chatTags:s,ignoreAgentAvailability:k}=i,A={};if(!window.zE)return b(!1);const _=null===(t=C.getElementById("launcher"))||void 0===t?void 0:t.parentElement;_&&(_.style.display="block");const z=window.zE?(window.zE("webWidget:get","chat:departments")||[]).filter((e=>"online"===e.status)):(n({event:"noZendeskObjectDetected"}),[]),M=z.some((e=>e.name===o||e.id===parseInt(o)));if(F(l,{...A,chatTags:s,departmentReceived:o,departments:window.zE("webWidget:get","chat:departments"),email:d,ignoreAgentAvailability:k,integration:l,isReceivedDepartmentOnline:M,name:u,question:m}),z.length){if(!v&&o&&!M){b(!1);break}c(),window.zE("webWidget","open"),window.zE((()=>{if(window.zE){var e;if(u||d)null===(e=window.zE)||void 0===e||e.identify({email:d,name:u});o&&M&&window.zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:o}}}}),s&&window.zE("webWidget","chat:addTags",s),m&&window.zE("webWidget","chat:send",m)}})),b(!0)}else k?(c(),window.zE("webWidget","open"),window.zE((()=>{var e;(u||d)&&(null===(e=window.zE)||void 0===e||e.identify({email:d,name:u}));s&&window.zE&&window.zE("webWidget","chat:addTags",s),m&&window.zE&&window.zE("webWidget","chat:send",m)})),b(!0)):b(!1);break;case"salesforce":if(!window.embedded_svc)return b(!1);const L={};x||(window.embedded_svc.addEventHandler("afterDestroy",r),x=!0),a(),window.Forethought("widget","hide");const{extraPrechatFormDetails:q=[],manually_click_salesforce_button:H=!1,manually_click_timeout:I=0,...R}=i,N={};if(u){const{firstName:e,lastName:t}=(e=>{const t=e.trim().replace(/\s{2,}/g," ").split(" "),i=t.length&&t[0]?t[0]:"";return{firstName:i,lastName:t.length>1?t.slice(1).join(" "):i}})(u);N.Name=u,N.FirstName=e,N.LastName=t}const B={extraPrechatFormDetails:q,prepopulatedPrechatFields:{Email:d,Subject:m,...N,...R}};if(L.startChatFields={...B},H){let e=!0;window.embedded_svc.addEventHandler("afterMaximize",(()=>{setTimeout((()=>{e&&window.embedded_svc.liveAgentAPI.startChat({...B}).then((()=>{e=!1}))}),I)}));const t=document.querySelector("div.embeddedServiceHelpButton button");L.salesforceChatButton=t,t?(t.click(),b(!0)):b(!1)}else window.embedded_svc.liveAgentAPI.startChat({...B}),b(!0);F(l,{...L,integration:l,manuallyClickSalesforceButton:H});break;case"kustomer":if(!window.Kustomer)return b(!1);const{availability:O}=window.Kustomer.isChatAvailable();if("disabled"===O||"hidden"===O)return b(!1);window.Kustomer.createConversation({customAttributes:{...i.customFields},message:m}),g.innerHTML="#kustomer-ui-sdk-iframe { display: block !important;}",C.body.appendChild(g),window.Forethought("widget","hide"),b(!0),F(l,{customFields:{...i.customFields},integration:l,question:m,widgetAvailability:O});break;case"intercom":if(!window.Intercom)return b(!1);h({autoSendConfig:i.autoSendConfig,email:d,identityVerificationEnabled:i.identityVerificationEnabled,name:u,question:m,userid:i.userid}),b(!0),F(l,{autoSendConfig:i.autoSendConfig,email:d,identityVerificationEnabled:i.identityVerificationEnabled,integration:l,name:u,question:m,userid:i.userid});break;case"snap_engage":if(!window.SnapEngage)return b(!1);f({additionalParameters:i,email:d,name:u,question:m}),b(!0),F(l,{additionalParameters:i,email:d,integration:l,name:u,question:m});break;case"drift":if(!window.drift)return b(!1);E({email:d,name:u,question:m}),b(!0),F(l,{email:d,integration:l,name:u,question:m});break;case"generic":try{S(p,{...i}),b(!0,!1)}catch(y){b(!1,!1)}F(l,{...i,integration:l,widgetOption:p});break;case"brand_embassy":if(!window.brandembassy)return b(!1);const{autoStartSession:P,customFields:$}=i;W({autoStartSession:P,customFields:$,name:u,question:m}),b(!0),F(l,{autoStartSession:P,customFields:$,integration:l,name:u,question:m});break;case"gorgias":if(!window.GorgiasChat)return b(!1);T({question:m}),b(!0),F(l,{integration:l,question:m});break;default:b(!1)}},F=(e,t)=>{console.log(`Forethought ${e} handoff`,{...t})};window.addEventListener("message",(e=>{const t=e.data,n=null===t||void 0===t?void 0:t.data,o=null===t||void 0===t?void 0:t.method;"forethoughtWidgetIntegrationHandoff"===t.event&&(e=>Boolean((e.origin===i||"*"===i)&&e.data))(e)&&L(t),"liveagent.restored"===o&&window.embedded_svc.liveAgentAPI.browserSessionInfo.activeChatSessions&&window.Forethought("widget","hide"),"liveagent.initialized"===o&&(a(),window.Forethought("widget","hide")),"chasitorChatEstablished"===(null===n||void 0===n?void 0:n.event)&&s()})),e.addEventListener("load",(()=>{window.zE&&y((()=>u(window.zE))),d(),g.innerHTML="#kustomer-ui-sdk-iframe { display: none !important;}",C.body.appendChild(g),(()=>{const e={...window.intercomSettings,hide_default_launcher:!0};window.intercomSettings={...e},window.Intercom&&(window.Intercom("hide"),window.Intercom("update",{...e})),C.body.appendChild(m)})(),b(),window.drift&&window.drift.hide(),k.innerHTML="#be-frame {display: none !important;}",C.body.appendChild(k),M.innerHTML="#gorgias-chat-container {display: none !important;}",C.body.appendChild(M)}))};!function(){var e;let t={height:0,width:0};const i=window.document,n=i.currentScript;if(!n)throw new Error("FT: Could not find embed script");const o=n.getAttribute("data-api-key");if(!o)return;const a=n.getAttribute("full-screen"),d=n.getAttribute("hidden"),s="true"===n.getAttribute("data-builder-preview"),r="true"===n.getAttribute("data-solve-lite-preview"),l=n.getAttribute("data-workflow-version"),w=null===(e=n.getAttribute("src"))||void 0===e?void 0:e.replace("embed.js",""),c={};Array.from(n.attributes).forEach((e=>{const t=e.nodeValue,i="null"===t;c[e.nodeName]=i?null:t}));const u=function(){const e=i.createElement("iframe");e.setAttribute("id","forethought-chat"),e.setAttribute("title","Virtual Assistant Chat"),e.setAttribute("allowfullscreen","allowfullscreen"),e.setAttribute("mozallowfullscreen","mozallowfullscreen"),e.setAttribute("msallowfullscreen","msallowfullscreen"),e.setAttribute("oallowfullscreen","oallowfullscreen"),e.setAttribute("webkitallowfullscreen","webkitallowfullscreen"),e.setAttribute("sandbox","allow-scripts allow-popups allow-top-navigation-by-user-activation allow-same-origin allow-popups-to-escape-sandbox allow-downloads allow-top-navigation"),e.setAttribute("src",w+`?v=2#data-api-key=${o}`),e.setAttribute("style",g+m({...t})),i.body.appendChild(e);const n=w?new URL(w).origin:"*",u=t=>{var i;null===(i=e.contentWindow)||void 0===i||i.postMessage(t,n)},p=t=>{e.setAttribute("style",g+t)},b=()=>{e.hidden=!0},f=()=>e.hidden=!1;e.addEventListener("load",(()=>{const e=E.matches,t=k;e?u({isMobile:!0,isSmallScreen:!1}):e||u({isMobile:!1,isSmallScreen:t.matches}),"true"===a&&u({action:"openWidget"}),d&&b()}));const v=e=>{const i=E.matches,n=S.matches,o=k;e&&i?(u({isMobile:!0,isSmallScreen:!1}),p("width: 100%; right: 0; height: 100%; bottom: 0;")):!e||i||s?p(e&&!i&&s?"max-width: 380px; width:100%; right:0; height: calc(100% - 69px); bottom: 0; border-radius: 12px 0 0 12px; z-index:1199":m({...t})):(u({isMobile:!1,isSmallScreen:o.matches}),p(n?h.replace("856px","90%"):h))},y=()=>{const i=t.height,n=e.clientHeight>i;v(n)},C=()=>window.document.getElementById("forethought-chat");window.addEventListener("message",(e=>{var i;if(i=e,Boolean((i.origin===n||"*"===n)&&i.data))switch(e.data.event){case"hideSolveWidget":b();break;case"showSolveWidget":f();break;case"hideIframeWidget":C()&&b();break;case"showIframeWidget":C()&&f();break;case"forethoughtWidgetOpened":v(!0);break;case"forethoughtWidgetClosed":v(!1);break;case"forethoughtWidgetLoaded":u({API_KEY:o,href:window.location.href,isBuilderPreview:s,isSolveLitePreview:r,origin:window.location.origin,rawParams:c,workflowVersion:l}),v(e.data.isOpen);break;case"forethoughtWidgetResize":const{height:i,width:n}=e.data.dimensions;i&&n&&(t={height:i,width:n},p(m({...t})));break;case"forethoughtWidgetResizeWithCssHeight":e.data.dimensions.height&&e.data.dimensions.width&&p(m({cssHeight:e.data.dimensions.height,width:e.data.dimensions.width}))}})),E.addEventListener("change",y),S.addEventListener("change",y),k.addEventListener("change",y),window.Forethought=(e,t,i)=>{if("widget"===e&&("open"===t&&u({action:"openWidget"}),"close"===t&&u({action:"closeWidget"}),"hide"===t&&b(),"show"===t&&f(),"triggerEventComplete"===t)){const e=null===i||void 0===i?void 0:i.identifier,n=(null===i||void 0===i?void 0:i.payload)||{};e?u({event:t,identifier:e,payload:n}):console.error("TRIGGER EVENT ERROR - event name is required at data.identifier")}},W()};"complete"===i.readyState||"interactive"===i.readyState?u():i.addEventListener("DOMContentLoaded",u)}()}()}();
//# sourceMappingURL=embed.js.map